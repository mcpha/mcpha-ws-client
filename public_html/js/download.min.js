
(function(a,b){if(typeof define==="function"&&define.amd){define([],b)}else{if(typeof exports==="object"){module.exports=b()}else{a.download=b()}}}(this,function(){return function a(s,g,n){var m=window,j="application/octet-stream",f=n||j,p=s,e=!g&&!n&&p,i=document.createElement("a"),q=function(t){return String(t)},h=(m.Blob||m.MozBlob||m.WebKitBlob||q),r=g||"download",c,b;h=h.call?h.bind(m):Blob;if(String(this)==="true"){p=[p,f];f=p[0];p=p[1]}if(e&&e.length<2048){r=e.split("/").pop().split("?")[0];i.href=e;if(i.href.indexOf(e)!==-1){var l=new XMLHttpRequest();l.open("GET",e,true);l.responseType="blob";l.onload=function(t){a(t.target.response,r,j)};setTimeout(function(){l.send()},0);return l}}if(/^data\:[\w+\-]+\/[\w+\-]+[,;]/.test(p)){if(p.length>(1024*1024*1.999)&&h!==q){p=d(p);f=p.type||j}else{return navigator.msSaveBlob?navigator.msSaveBlob(d(p),r):o(p)}}c=p instanceof h?p:new h([p],{type:f});function d(z){var w=z.split(/[:;,]/),v=w[1],A=w[2]=="base64"?atob:decodeURIComponent,t=A(w.pop()),y=t.length,u=0,x=new Uint8Array(y);for(u;u<y;++u){x[u]=t.charCodeAt(u)}return new h([x],{type:v})}function o(t,v){if("download" in i){i.href=t;i.setAttribute("download",r);i.className="download-js-link";i.innerHTML="downloading...";i.style.display="none";document.body.appendChild(i);setTimeout(function(){i.click();document.body.removeChild(i);if(v===true){setTimeout(function(){m.URL.revokeObjectURL(i.href)},250)}},66);return true}if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent)){t=t.replace(/^data:([\w\/\-\+]+)/,j);if(!window.open(t)){if(confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")){location.href=t}}return true}var u=document.createElement("iframe");document.body.appendChild(u);if(!v){t="data:"+t.replace(/^data:([\w\/\-\+]+)/,j)}u.src=t;setTimeout(function(){document.body.removeChild(u)},333)}if(navigator.msSaveBlob){return navigator.msSaveBlob(c,r)}if(m.URL){o(m.URL.createObjectURL(c),true)}else{if(typeof c==="string"||c.constructor===q){try{return o("data:"+f+";base64,"+m.btoa(c))}catch(k){return o("data:"+f+","+encodeURIComponent(c))}}b=new FileReader();b.onload=function(t){o(this.result)};b.readAsDataURL(c)}return true}}));